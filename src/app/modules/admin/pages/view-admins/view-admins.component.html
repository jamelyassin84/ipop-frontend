<ng-template #viewAdmin>
    <ViewAdmin [admin]="currentAdmin"></ViewAdmin>
</ng-template>
<div class="card">
    <div class="card-body">
        <table class="table mT-30 table-striped">
            <thead class="table-dark bgc-blue-900">
                <tr>
                    <th><i class="ti-user"></i></th>
                    <th scope="col">Fullname</th>
                    <th scope="col">Role</th>
                    <th scope="col">Status</th>
                    <th scope="col">District</th>
                    <th scope="col">Municipality</th>
                    <th scope="col">Barangay</th>
                    <th scope="col">Date Registered</th>
                    <th></th>
                </tr>
            </thead>
            <tbody [@listAnimation]="admins.length">
                <tr *ngFor="let admin of admins; trackBy: trackByFn">
                    <td>
                        <img
                            *ngIf="admin.profile_picture"
                            [src]="admin.profile_picture.uri"
                            alt=""
                            class="border t-object-contain t-border-gray-200 t-bg-gray-300"
                        />

                        <div
                            *ngIf="!admin.profile_picture"
                            class="avatar t-bg-gray-300 t-text-white t-font-bold t-text-2xl t-flex t-items-center t-justify-center"
                        >
                            {{ admin.fullname | initials }}
                        </div>
                    </td>

                    <td>{{ admin.fullname }}</td>
                    <td>
                        {{
                            admin.roles.length !== 0
                                ? admin.roles[0].name
                                : 'N/A'
                        }}
                    </td>
                    <td *ngIf="admin.iterations === 5">
                        <span
                            class="small d-ib lh-0 va-m fw-600 bdrs-10em pX-10 pY-10 bgc-red-50 c-red-500"
                        >
                            Blocked
                        </span>
                    </td>
                    <td *ngIf="admin.iterations !== 5">
                        <span
                            class="small d-ib lh-0 va-m fw-600 bdrs-10em pX-10 pY-10 bgc-green-50 c-green-500"
                        >
                            Active
                        </span>
                    </td>
                    <td>{{ admin.district }}</td>
                    <td>{{ admin.municipality }}</td>
                    <td>{{ admin.barangay }}</td>
                    <td>{{ admin.created_at | date: 'MMMM dd, yyyy - ha' }}</td>
                    <td>
                        <Modal
                            (click)="currentAdmin = admin"
                            size="xl"
                            title="View"
                            btnTitle="View admin"
                            btnClass="btn btn-sm btn-outline-info mr-2 t-text-xl"
                            [template]="viewAdmin"
                        ></Modal>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
