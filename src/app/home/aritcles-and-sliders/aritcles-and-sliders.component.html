<ng-template #customizeSlider>
    <EditSliderImage></EditSliderImage>
</ng-template>

<ng-template #addArticle>
    <AddArticle></AddArticle>
</ng-template>

<ng-template #addQuickLinks>
    <AddQuickLinks></AddQuickLinks>
</ng-template>

<div
    *ngIf="!isUser"
    class="d-flex"
    style="justify-content: flex-end; position: relative; z-index: 1"
>
    <Modal
        icon="ti-pencil-alt"
        size="lg"
        title="Customize Slider"
        btnSize="sm"
        btnTitle="Customize Slider"
        btnClass="btn bgc-blue-900 text-white mB-10"
        [template]="customizeSlider"
    ></Modal>
</div>

<div
    @zoomIn
    class="row d-flex aic jcc"
    style="min-height: 50vh; background-color: rgba(0, 0, 0, 0.1)"
    *ngIf="images.length === 0"
>
    <Spinner></Spinner>

    <NoDataComponent [data]="images"></NoDataComponent>
</div>

<div style="position: relative; z-index: 0" *ngIf="images.length !== 0">
    <carousel
        [margin]="0"
        [height]="500"
        [dots]="true"
        [borderRadius]="0"
        [autoplayInterval]="3000"
        [autoplay]="images.length < 2 ? false : true"
        [cellsToShow]="innerWidth > 1139 ? (images.length === 1 ? 1 : 2.3) : 1"
    >
        <div
            style="height: 50vh"
            class="carousel-cell"
            *ngFor="let image of images"
        >
            <home-carousel [image]="image"></home-carousel>
        </div>
    </carousel>
</div>

<div class="t-grid t-grid-cols-1 md:t-grid-cols-3 bg-light t-gap-10 mT-40">
    <div [@listAnimation]="articles.length" class="md:t-col-span-2 t-bg-white">
        <ul class="bg-white t-p-3 nav nav-tabs t-flex t-items-center">
            <li
                role="button"
                class="nav-item"
                *ngFor="let tab of filterList; trackBy: trackByFn"
            >
                <button
                    role="button"
                    (click)="setTab(tab)"
                    class="t-px-5 nav-link t-text-2xl hover:t-bg-gray-50"
                    [ngClass]="{
                        't-bg-bg-brand t-text-white ': tabs[tab],
                        'text-muted': !tabs[tab]
                    }"
                >
                    {{ tab | titlecase }}
                </button>
            </li>

            <li role="button" *ngIf="!isUser" class="ml-auto mr-2">
                <DropDown [buttons]="nav"></DropDown>

                <ng-template #nav>
                    <Modal
                        size="lg"
                        title="Add Article"
                        btnSize="sm"
                        btnTitle="Add an article"
                        btnClass="dropdown-item text-secondary"
                        [template]="addArticle"
                    ></Modal>
                </ng-template>
            </li>
        </ul>

        <NoDataComponent [data]="articles"></NoDataComponent>

        <div
            class="t-px-6"
            *ngFor="let article of articles; trackBy: trackByFn"
        >
            <home-article
                [isUser]="isUser"
                [article]="article"
                [imageViewer]="imageViewer"
                [isSuperAdmin]="isSuperAdmin"
                (onRemoveArticle)="removeArticle($event)"
                (onTransformImages)="transformImages($event)"
            ></home-article>
        </div>
    </div>

    <div @slideInRight class="p-0 m-0 w-100">
        <div class="bg-white card">
            <div class="card-header bgc-blue-900 d-flex h4 aic">
                <div class="mr-auto text-white">Quick links</div>
                <Modal
                    *ngIf="!isUser"
                    icon="ti-plus"
                    size="lg"
                    title="Add Quick Link"
                    btnSize="sm"
                    btnTitle="Add"
                    btnClass="btn bgc-blue-900 ml-auto text-white"
                    [template]="addQuickLinks"
                ></Modal>
            </div>
            <div style="overflow: auto">
                <NoDataComponent [data]="quickLinks"></NoDataComponent>

                <div
                    class="card-body d-flex aic"
                    *ngFor="let link of quickLinks; trackBy: trackByFn"
                >
                    <span class="p-10">
                        <i class="bi bi-link t-text-2xl t-text-text-brand"></i>
                    </span>
                    <a
                        role="button"
                        [href]="link.url"
                        target="_blank"
                        class="p-10"
                    >
                        <span class="hover:t-underline t-text-black">
                            {{ link.title }}
                        </span>
                    </a>
                    <span *ngIf="!isUser && isSuperAdmin" class="ml-auto">
                        <button
                            placement="right "
                            ngbTooltip="Remove"
                            (click)="removeLink(link.id)"
                            class="btn btn-sm text-secondary"
                        >
                            <i class="ti-minus"></i>
                        </button>
                    </span>
                </div>
            </div>
        </div>
    </div>
</div>

<ng-template #imageViewer>
    <ImageViewer [images]="currentImages"></ImageViewer>
</ng-template>
